<view template="dashboard.html">
  <label>Without Puppet Run</label>

  <module name="AccountBar" layoutPanel="appHeader"/>
  <module name="AppBar" layoutPanel="navigationHeader"/>
  <module name="Message" layoutPanel="messaging">
    <param name="filter">*</param>
    <param name="clearOnJobDispatch">False</param>
    <param name="maxSize">1</param>
  </module>
  <module name="TitleBar" layoutPanel="viewHeader">
    <param name="actionsMenuFilter">dashboard</param>
  </module>

<module name="ServerSideInclude" layoutPanel="panel_row2_col1">
    <param name="src">puppet_withoutpuppetrun.html</param>
</module>

<module name="TimeRangePicker" layoutPanel="panel_row2_col1">
	   <param name="selected">Last 24 Hours</param>
		 <param name="searchWhenChanged">True</param>

  <module name="HiddenSearch" layoutPanel="panel_row2_col1" autoRun="True">
      <param name="search">`puppet_logs` [`puppet_hosts`]| search NOT [search "Finished catalog run" `puppet_logs`|dedup host|fields host|fields - _*|format maxresults=10000]|table host</param>
    <param name="earliest">-24h@h</param>
    <module name="Paginator">
      <param name="count">30</param>
      <param name="entityName">results</param>
      <module name="ViewRedirectorLink" layoutPanel="panel_row2_col1_grp1">
        <param name="viewTarget">flashtimeline</param>
        <param name="label">View full results</param>
      </module>
      <module name="SimpleResultsTable">
          <param name="drilldown">row</param>
          <module name="HiddenSearch" layoutPanel="panel_row2_col1" autoRun="True">
              <param name="search">`puppet_logs`|table host</param>
            <module name="ConvertToDrilldownSearch">
                <module name="ViewRedirector">
                    <param name="viewTarget">flashtimeline</param>
                </module>
            </module>
          </module>
        </module>
    </module>
  </module>
</module>

<module name="GenericHeader" layoutPanel="panel_row2_col2">
    <param name="label">Hosts where Puppet appears to be disabled</param>
</module>

<module name="HiddenSearch" layoutPanel="panel_row2_col2" autoRun="True">
    <param name="search">`puppet_logs` "Run of Puppet configuration client already in progress; skipping" OR "Finished catalog run"| dedup host sortby +host| search NOT "Finished catalog run"| table host</param>
    <param name="earliest">-2h@h</param>
    <param name="latest">-5m@m</param>
    <module name="Paginator">
        <param name="count">30</param>
        <param name="entityName">results</param>
      <module name="ViewRedirectorLink" layoutPanel="panel_row2_col2_grp1">
        <param name="viewTarget">flashtimeline</param>
        <param name="label">View full results</param>
      </module>
      <module name="SimpleResultsTable">
          <param name="drilldown">row</param>
          <module name="HiddenSearch" layoutPanel="panel_row2_col1" autoRun="True">
              <param name="search">sourcetype=puppet_syslog|table host</param>
            <module name="ConvertToDrilldownSearch">
                <module name="ViewRedirector">
                    <param name="viewTarget">flashtimeline</param>
                </module>
            </module>
          </module>
        </module>
    </module>


</module>
</view>
